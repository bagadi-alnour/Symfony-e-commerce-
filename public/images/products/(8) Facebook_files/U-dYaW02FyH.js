if (self.CavalryLogger) { CavalryLogger.start_js(["EskSm"]); }

__d("XFBStoriesSingleStoryAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/stories/view/async/",{card_id:{type:"FBID"},story_id:{type:"FBID"},auto_open_viewersheet:{type:"Bool",defaultValue:!1},story_action_source:{type:"String"}})}),null);
__d("FBStoriesRing",["csx","cx","Arbiter","CSS","DOM","FBStoriesLoggingConstants","XFBStoriesSingleStoryAsyncController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function a(a){this.$1=a.element;this.$2=a.profileId;this.$3=a.storyId;this.$4=!1;a=b("DOM").scry(this.$1,"._6_ut");a.length>0&&(this.$4=!0);this.$5()}a.prototype.$5=function(){__p&&__p();b("Arbiter").subscribe("has_story_bucket_been_seen",function(a,c){if(this.$2===c){a=b("DOM").scry(this.$1,"._6_ut");a.length>0&&(b("CSS").removeClass(a[0],"_6_ut"),this.$4=!1)}}.bind(this)),b("Arbiter").subscribe("update_next_thread_to_view",function(a,c){a=c.bucketOwnerId;c=c.threadId;if(this.$2===a&&this.$4){a=b("XFBStoriesSingleStoryAsyncController").getURIBuilder().setFBID("story_id",this.$3).setFBID("card_id",c).setBool("auto_open_viewersheet",!1).setString("story_action_source",b("FBStoriesLoggingConstants").SOURCES.POST_HEADER).getURI();this.$1.setAttribute("ajaxify",a)}}.bind(this))};e.exports=a}),null);